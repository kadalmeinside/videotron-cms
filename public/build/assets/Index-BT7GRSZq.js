import{f as n,o as r,b as l,i as x,h as v,a,u as o,d as I,j as z,r as f,x as Q,k as X,W as F,g as ee,w as d,c as E,e as C,F as T,l as D,t as m,n as $,q as H,v as te,s as le}from"./app-BzrRThjh.js";import{a as se,A as oe}from"./AuthenticatedLayout-DnHg0eJT.js";import{l as ae}from"./lodash-C7dAvps1.js";import{_ as P}from"./PrimaryButton-LQ97rJMg.js";import{_ as R}from"./Modal-Cr5BV0p4.js";import{_ as c}from"./InputLabel-DCu4171V.js";import{_ as U}from"./TextInput-DzWFtkef.js";import{_ as p}from"./InputError-C2bZLSU5.js";import{_ as A}from"./SecondaryButton-VM52dsy7.js";import{D as re}from"./DangerButton-B35ZFC1t.js";import{r as ne}from"./XCircleIcon-oJU48V8Z.js";import"./XMarkIcon-BzmqphT5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function ie(_,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"})])}function ue(_,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function de(_,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function ce(_,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function me(_,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{d:"M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"})])}const pe={key:0,class:"relative w-full h-32 border-2 border-dashed rounded-lg flex items-center justify-center bg-gray-100"},_e=["src"],O={__name:"ImagePreview",props:{existingUrl:{type:String,default:null},file:{type:File,default:null}},emits:["clear"],setup(_,{emit:u}){const y=_,B=x(()=>y.file?URL.createObjectURL(y.file):y.existingUrl);return(j,V)=>B.value?(r(),n("div",pe,[l("img",{src:B.value,class:"max-w-full max-h-full object-contain",alt:"Image Preview"},null,8,_e),l("button",{onClick:V[0]||(V[0]=I(b=>j.$emit("clear"),["prevent"])),type:"button",class:"absolute -top-2 -right-2 bg-white rounded-full text-gray-500 hover:text-red-600 transition",title:"Hapus gambar"},[a(o(ne),{class:"h-6 w-6"})])])):v("",!0)}},ge={class:"pb-12 pt-4"},fe={class:"max-w-full mx-auto"},xe={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ve={class:"p-6 text-gray-900 dark:text-gray-100"},ye={class:"mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4"},be={class:"overflow-x-auto"},he={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},we={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ke={key:0},Me={class:"px-4 py-2"},Ce=["src"],$e={key:1,class:"text-sm text-gray-400"},Be={class:"px-4 py-2 font-medium text-sm text-gray-900 dark:text-white"},Ve={class:"px-4 py-2 text-sm text-gray-500 dark:text-gray-300"},Le={class:"px-4 py-2 text-sm"},Ue=["href"],je={key:1,class:"text-gray-400"},Se={class:"px-4 py-2 text-sm"},Fe=["href"],Ee={key:1,class:"text-gray-400"},Te={class:"px-4 py-2 text-sm"},Ze={class:"px-4 py-2 whitespace-nowrap text-right text-sm"},qe=["onClick"],De=["onClick"],He={class:"text-lg font-bold border-b pb-3 mb-6"},Pe={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6"},Re={class:"space-y-6"},Ae=["value"],Oe={class:"mt-2 grid grid-cols-3 gap-3"},Ie={key:0},Ke={key:1},Ne={key:0,class:"text-xs text-gray-500 mt-1"},We={class:"space-y-6"},Ye={class:"mt-6 flex justify-end pt-6 border-t dark:border-gray-700"},Ge=["value"],Je={class:"p-6"},ze={class:"mt-2 text-sm text-gray-600"},Qe={class:"mt-6 flex justify-end"},mt={__name:"Index",setup(_){const u=z(),y=x(()=>u.props.mediaList||{data:[]}),B=x(()=>u.props.filters||{search:""}),j=x(()=>u.props.clients||[]),V=x(()=>u.props.can||{});x(()=>{var i;return(i=u.props.flash)==null?void 0:i.message}),x(()=>{var i;return((i=u.props.flash)==null?void 0:i.type)||"info"});const b=f(!1),g=f(!1),h=f(!1),w=f(null),S=f(B.value.search),t=Q({title:"",client_id:"",source_type:"local",source_value:"",source_file:null,duration:30,top_banner_file:null,bottom_banner_file:null,running_text:"",theme_type:"solid",theme_color_1:"#000000",theme_color_2:"#FFFFFF"}),k=f(null),M=f(null);X(S,ae.debounce(i=>{F.get(route("admin.media.index"),{search:i},{preserveState:!0,preserveScroll:!0,replace:!0,only:["mediaList","filters"]})},300));const K=i=>{const e=i.target.files[0];if(e){t.source_file=e;const s=document.createElement("video");s.preload="metadata",s.onloadedmetadata=()=>{window.URL.revokeObjectURL(s.src),t.duration=Math.round(s.duration)},s.src=URL.createObjectURL(e)}},Z=i=>{i==="top"?(t.top_banner_file=null,k.value=null):i==="bottom"&&(t.bottom_banner_file=null,M.value=null)},N=()=>{g.value=!1,t.reset(),t.clearErrors(),k.value=null,M.value=null,b.value=!0},W=i=>{const e=i.full_data_for_edit;g.value=!0,t.reset(),t.clearErrors(),t.id=e.id,t.title=e.title,t.client_id=e.client_id,t.source_type=e.source_type,t.source_value=e.source_value,t.duration=e.duration,t.running_text=e.running_text,k.value=e.top_banner_url,M.value=e.bottom_banner_url,b.value=!0},L=()=>{b.value=!1},Y=()=>{if(!g.value){t.post(route("admin.media.store"),{preserveScroll:!0,onSuccess:()=>L()});return}F.post(route("admin.media.update",t.id),{_method:"PUT",title:t.title,client_id:t.client_id,source_type:t.source_type,source_value:t.source_value,duration:t.duration,running_text:t.running_text,source_file:t.source_file,top_banner_file:t.top_banner_file,bottom_banner_file:t.bottom_banner_file},{preserveScroll:!0,onSuccess:()=>L(),onError:i=>{t.setError(i)}})},G=i=>{w.value=i,h.value=!0},J=()=>{w.value&&F.delete(route("admin.media.destroy",w.value.id),{preserveScroll:!0,onSuccess:()=>{h.value=!1,w.value=null}})};return(i,e)=>(r(),n(T,null,[a(o(ee),{title:"Manajemen Media"}),a(oe,null,{header:d(()=>e[15]||(e[15]=[l("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Manajemen Klien",-1)])),default:d(()=>[l("div",ge,[l("div",fe,[l("div",xe,[l("div",ve,[l("div",ye,[a(U,{type:"text",modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=s=>S.value=s),placeholder:"Cari judul media...",class:"w-full md:max-w-md"},null,8,["modelValue"]),V.value.manage_media?(r(),E(P,{key:0,onClick:N},{default:d(()=>[a(o(de),{class:"h-5 w-5 mr-2"}),e[16]||(e[16]=C(" Tambah Media "))]),_:1})):v("",!0)]),l("div",be,[l("table",he,[e[18]||(e[18]=l("thead",{class:"bg-gray-50 dark:bg-gray-700"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Preview"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Judul"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Klien"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Top Banner"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Bottom Banner"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi")])],-1)),l("tbody",we,[y.value.data.length?v("",!0):(r(),n("tr",ke,e[17]||(e[17]=[l("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"},"Belum ada media.",-1)]))),(r(!0),n(T,null,D(y.value.data,s=>(r(),n("tr",{key:s.id},[l("td",Me,[s.preview_url?(r(),n("img",{key:0,src:s.preview_url,class:"w-24 h-14 object-cover rounded bg-gray-200",alt:"preview"},null,8,Ce)):(r(),n("span",$e,m(s.source_type),1))]),l("td",Be,m(s.title),1),l("td",Ve,m(s.client.company_name),1),l("td",Le,[s.top_banner_url?(r(),n("a",{key:0,href:s.top_banner_url,target:"_blank",class:"text-blue-600 hover:underline"},"Link",8,Ue)):(r(),n("span",je,"-"))]),l("td",Se,[s.bottom_banner_url?(r(),n("a",{key:0,href:s.bottom_banner_url,target:"_blank",class:"text-blue-600 hover:underline"},"Link",8,Fe)):(r(),n("span",Ee,"-"))]),l("td",Te,[l("span",{class:$(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.is_approved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},m(s.is_approved?"Approved":"Pending"),3)]),l("td",Ze,[l("button",{onClick:q=>W(s),class:"p-1 mr-2 text-indigo-600 hover:text-indigo-900",title:"Edit Media"},[a(o(ue),{class:"h-5 w-5"})],8,qe),l("button",{onClick:q=>G(s),class:"p-1 text-red-600 hover:text-red-900",title:"Hapus Media"},[a(o(ce),{class:"h-5 w-5"})],8,De)])]))),128))])])])])])])]),a(R,{show:b.value,onClose:L,maxWidth:"2xl"},{default:d(()=>[l("form",{onSubmit:I(Y,["prevent"]),class:"p-6",novalidate:""},[l("h2",He,m(g.value?"Edit Media":"Tambah Media Baru"),1),l("div",Pe,[l("div",Re,[l("div",null,[a(c,{for:"title",value:"Judul Media",required:""}),a(U,{id:"title",modelValue:o(t).title,"onUpdate:modelValue":e[1]||(e[1]=s=>o(t).title=s),class:"w-full mt-1",placeholder:"Cth: Iklan Lebaran"},null,8,["modelValue"]),a(p,{message:o(t).errors.title,class:"mt-2"},null,8,["message"])]),l("div",null,[a(c,{for:"client_id",value:"Klien Pemilik",required:""}),H(l("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(t).client_id=s),class:"w-full mt-1 border-gray-300 rounded-md shadow-sm"},[e[19]||(e[19]=l("option",{disabled:"",value:""},"Pilih Klien",-1)),(r(!0),n(T,null,D(j.value,s=>(r(),n("option",{key:s.id,value:s.id},m(s.company_name),9,Ae))),128))],512),[[te,o(t).client_id]]),a(p,{message:o(t).errors.client_id,class:"mt-2"},null,8,["message"])]),l("div",null,[a(c,{value:"Sumber Media",required:""}),l("div",Oe,[l("button",{type:"button",onClick:e[3]||(e[3]=s=>o(t).source_type="local"),class:$([o(t).source_type==="local"?"bg-blue-600 text-white ring-2 ring-blue-400":"bg-gray-200 text-gray-600 hover:bg-gray-300 opacity-60","p-3 rounded-lg text-center transition"])},[a(o(ie),{class:"h-6 w-6 mx-auto"}),e[20]||(e[20]=l("span",{class:"text-xs mt-1 block"},"Lokal",-1))],2),l("button",{type:"button",onClick:e[4]||(e[4]=s=>o(t).source_type="youtube"),class:$([o(t).source_type==="youtube"?"bg-red-600 text-white ring-2 ring-red-400":"bg-gray-200 text-gray-600 hover:bg-gray-300 opacity-60","p-3 rounded-lg text-center transition"])},[a(o(me),{class:"h-6 w-6 mx-auto"}),e[21]||(e[21]=l("span",{class:"text-xs mt-1 block"},"YouTube",-1))],2),l("button",{type:"button",onClick:e[5]||(e[5]=s=>o(t).source_type="vimeo"),class:$([o(t).source_type==="vimeo"?"bg-sky-500 text-white ring-2 ring-sky-300":"bg-gray-200 text-gray-600 hover:bg-gray-300 opacity-60","p-3 rounded-lg text-center transition"])},[a(o(se),{class:"h-6 w-6 mx-auto"}),e[22]||(e[22]=l("span",{class:"text-xs mt-1 block"},"Vimeo",-1))],2)])]),o(t).source_type==="local"?(r(),n("div",Ie,[a(c,{for:"source_file",value:g.value?"Ganti File (Opsional)":"Pilih File (Video/Gambar)",required:!g.value},null,8,["value","required"]),l("input",{type:"file",onChange:K,accept:"video/mp4,video/quicktime,image/*",class:"w-full mt-1 block text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-600 hover:file:bg-indigo-100"},null,32),a(p,{message:o(t).errors.source_file,class:"mt-2"},null,8,["message"])])):v("",!0),o(t).source_type==="youtube"||o(t).source_type==="vimeo"?(r(),n("div",Ke,[a(c,{for:"source_value",value:"URL Video",required:""}),a(U,{id:"source_value",modelValue:o(t).source_value,"onUpdate:modelValue":e[6]||(e[6]=s=>o(t).source_value=s),class:"w-full mt-1",placeholder:"https://..."},null,8,["modelValue"]),a(p,{message:o(t).errors.source_value,class:"mt-2"},null,8,["message"])])):v("",!0),l("div",null,[a(c,{for:"duration",value:"Durasi Tayang (detik)",required:""}),a(U,{id:"duration",modelValue:o(t).duration,"onUpdate:modelValue":e[7]||(e[7]=s=>o(t).duration=s),modelModifiers:{number:!0},type:"number",class:"w-full mt-1",placeholder:"Detik",readonly:o(t).source_type==="local"&&o(t).source_file},null,8,["modelValue","readonly"]),o(t).source_type!=="local"?(r(),n("p",Ne,"Harap isi durasi manual untuk YouTube/Vimeo.")):v("",!0),a(p,{message:o(t).errors.duration,class:"mt-2"},null,8,["message"])])]),l("div",We,[l("div",null,[a(c,{for:"top_banner",value:"Banner Atas (Opsional)"}),o(t).top_banner_file||k.value?(r(),E(O,{key:0,file:o(t).top_banner_file,"existing-url":k.value,onClear:e[8]||(e[8]=s=>Z("top")),class:"mt-2"},null,8,["file","existing-url"])):(r(),n("input",{key:1,type:"file",onInput:e[9]||(e[9]=s=>o(t).top_banner_file=s.target.files[0]),accept:"image/*",class:"w-full mt-1 block text-sm ..."},null,32)),a(p,{message:o(t).errors.top_banner_file,class:"mt-2"},null,8,["message"])]),l("div",null,[a(c,{for:"bottom_banner",value:"Banner Bawah (Opsional)"}),o(t).bottom_banner_file||M.value?(r(),E(O,{key:0,file:o(t).bottom_banner_file,"existing-url":M.value,onClear:e[10]||(e[10]=s=>Z("bottom")),class:"mt-2"},null,8,["file","existing-url"])):(r(),n("input",{key:1,type:"file",onInput:e[11]||(e[11]=s=>o(t).bottom_banner_file=s.target.files[0]),accept:"image/*",class:"w-full mt-1 block text-sm ..."},null,32)),a(p,{message:o(t).errors.bottom_banner_file,class:"mt-2"},null,8,["message"])]),l("div",null,[a(c,{for:"running_text",value:"Running Text (Opsional)"}),H(l("textarea",{id:"running_text","onUpdate:modelValue":e[12]||(e[12]=s=>o(t).running_text=s),class:"w-full mt-1 border-gray-300 rounded-md",rows:"4"},null,512),[[le,o(t).running_text]]),a(p,{message:o(t).errors.running_text,class:"mt-2"},null,8,["message"])])])]),l("div",Ye,[o(t).progress?(r(),n("progress",{key:0,value:o(t).progress.percentage,max:"100",class:"mr-4 w-48 self-center"},null,8,Ge)):v("",!0),a(A,{onClick:L,type:"button"},{default:d(()=>e[23]||(e[23]=[C("Batal")])),_:1}),a(P,{class:$(["ml-3",{"opacity-25":o(t).processing}]),disabled:o(t).processing},{default:d(()=>[C(m(g.value?"Update Media":"Simpan Media"),1)]),_:1},8,["disabled","class"])])],32)]),_:1},8,["show"]),a(R,{show:h.value,onClose:e[14]||(e[14]=s=>h.value=!1),maxWidth:"md"},{default:d(()=>{var s;return[l("div",Je,[e[26]||(e[26]=l("h2",{class:"text-lg font-medium"},"Konfirmasi Hapus",-1)),l("p",ze,'Yakin ingin menghapus media "'+m((s=w.value)==null?void 0:s.title)+'" beserta semua filenya?',1),l("div",Qe,[a(A,{onClick:e[13]||(e[13]=q=>h.value=!1)},{default:d(()=>e[24]||(e[24]=[C("Batal")])),_:1}),a(re,{onClick:J,class:"ml-3"},{default:d(()=>e[25]||(e[25]=[C("Ya, Hapus")])),_:1})])])]}),_:1},8,["show"])]),_:1})],64))}};export{mt as default};
