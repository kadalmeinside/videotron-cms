import{f as d,o as i,b as t,j as F,i as p,x as $,a,u as o,g as A,w as c,e as g,d as H,p as C,F as x,l as _,t as n,v as M,h,n as T}from"./app-CbJTofjA.js";import{A as D}from"./AuthenticatedLayout-BpTn9olP.js";import{r as B,_ as E}from"./Pagination-BS0Y_ZyH.js";import{_ as k}from"./InputLabel-CfcN6M9X.js";import{_ as N}from"./TextInput-CHAgEWCO.js";import{_ as P}from"./PrimaryButton-CIGpg0IQ.js";import{_ as U}from"./SecondaryButton-cfkaRMoK.js";import"./XMarkIcon-I_PYN2P5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function Z(b,m){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}const j={class:"pb-12 pt-4"},I={class:"max-w-full mx-auto space-y-6"},R={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},z={class:"p-6"},W={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center"},q=["href"],G=["value"],J={class:"flex gap-x-2"},K={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},O={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},X={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Y={key:0},tt={colspan:"4",class:"px-6 py-10 text-center text-gray-500 dark:text-gray-400"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},rt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},at={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300"},ot={key:0,class:"p-4 border-t border-gray-200 dark:border-gray-700"},xt={__name:"Index",setup(b){const m=F(),u=p(()=>m.props.logs||{data:[],links:[]}),f=p(()=>m.props.filters||{}),w=p(()=>m.props.allVideotrons||[]),r=$({date:f.value.date||"",videotron_id:f.value.videotron_id||""}),y=()=>{r.get(route("admin.logs.index"),{preserveState:!0,preserveScroll:!0})},V=()=>{r.reset(),y()},L=l=>l?new Date(l).toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",S=p(()=>{const l=new URLSearchParams;return r.date&&l.append("date",r.date),r.videotron_id&&l.append("videotron_id",r.videotron_id),`${route("admin.logs.export")}?${l.toString()}`});return(l,e)=>(i(),d(x,null,[a(o(A),{title:"Log Aktivitas Player"}),a(D,null,{header:c(()=>e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Log Aktivitas Player ",-1)])),default:c(()=>[t("div",j,[t("div",I,[t("div",R,[t("div",z,[t("div",W,[e[4]||(e[4]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 sm:mb-0"},"Filter Log",-1)),t("a",{href:S.value,class:"inline-flex items-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600"},[a(o(B),{class:"-ml-0.5 mr-1.5 h-5 w-5"}),e[3]||(e[3]=g(" Ekspor Excel "))],8,q)]),t("form",{onSubmit:H(y,["prevent"]),class:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},[t("div",null,[a(k,{for:"date",value:"Tanggal"}),a(N,{id:"date",type:"date",class:"mt-1 block w-full",modelValue:o(r).date,"onUpdate:modelValue":e[0]||(e[0]=s=>o(r).date=s)},null,8,["modelValue"])]),t("div",null,[a(k,{for:"videotron_id",value:"Videotron"}),C(t("select",{id:"videotron_id","onUpdate:modelValue":e[1]||(e[1]=s=>o(r).videotron_id=s),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[--color-primary-500] dark:focus:border-[--color-primary-600] focus:ring-[--color-primary-500] dark:focus:ring-[--color-primary-600] rounded-md shadow-sm"},[e[5]||(e[5]=t("option",{value:""},"Semua Videotron",-1)),(i(!0),d(x,null,_(w.value,s=>(i(),d("option",{key:s.id,value:s.id},n(s.name),9,G))),128))],512),[[M,o(r).videotron_id]])]),t("div",J,[a(P,{disabled:o(r).processing},{default:c(()=>e[6]||(e[6]=[g("Filter")])),_:1},8,["disabled"]),a(U,{onClick:V,type:"button"},{default:c(()=>e[7]||(e[7]=[g("Reset")])),_:1})])],32)])]),t("div",K,[t("div",O,[t("table",Q,[e[10]||(e[10]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Waktu"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Videotron"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Tipe Event"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Pesan")])],-1)),t("tbody",X,[u.value.data.length?h("",!0):(i(),d("tr",Y,[t("td",tt,[a(o(Z),{class:"mx-auto h-12 w-12 text-gray-400"}),e[8]||(e[8]=t("h3",{class:"mt-2 text-sm font-semibold"},"Tidak Ada Log",-1)),e[9]||(e[9]=t("p",{class:"mt-1 text-sm"},"Tidak ada data log untuk ditampilkan.",-1))])])),(i(!0),d(x,null,_(u.value.data,s=>{var v;return i(),d("tr",{key:s.id},[t("td",et,n(L(s.logged_at)),1),t("td",st,n((v=s.videotron)==null?void 0:v.name),1),t("td",rt,[t("span",{class:T(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.event_type.includes("FAIL")?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"])},n(s.event_type),3)]),t("td",at,n(s.message),1)])}),128))])])]),u.value.data.length>0?(i(),d("div",ot,[a(E,{links:u.value.links},null,8,["links"])])):h("",!0)])])])]),_:1})],64))}};export{xt as default};
