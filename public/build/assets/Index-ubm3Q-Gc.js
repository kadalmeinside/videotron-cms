import{j as Q,i as k,r as b,x as X,k as Z,W as I,f as n,o as i,a as l,u as o,g as ee,w as m,b as e,h as $,c as N,e as w,F as f,l as V,t as r,n as M,S as te,d as se,p as D,v as T}from"./app-uG_Ut-Td.js";import{A as ae}from"./AuthenticatedLayout-XBVBvuiC.js";import{_ as E}from"./PrimaryButton-Cf_dIBSR.js";import{_ as H}from"./SecondaryButton-BTBcrxEK.js";import{_ as P,D as le}from"./Modal-BnI9BkGT.js";import{_ as p}from"./InputError-Bh-0hY5P.js";import{_ as u}from"./InputLabel-BieNfq3Q.js";import{_ as v}from"./TextInput-D9MmRmYL.js";import{_ as oe,r as de}from"./Toast-aKBHL2Zb.js";import{l as ie}from"./lodash-Bod6gNoO.js";import{r as ne}from"./PlusIcon-Cisso149.js";import{r as O,a as W}from"./TrashIcon-6Agr2d2E.js";import"./XMarkIcon-CvPTwrjB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ExclamationTriangleIcon-Dw2vy__R.js";const re={class:"pb-12 pt-4"},ue={class:"max-w-full mx-auto"},me={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ce={class:"p-6 text-gray-900 dark:text-gray-100"},pe={class:"mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4"},ve={class:"relative w-full md:max-w-md"},fe={key:0,class:"text-center py-12 text-gray-500"},ge={key:1},xe={class:"hidden md:block overflow-x-auto"},ye={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},_e={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},he={class:"px-6 py-4 font-medium"},ke={class:"px-6 py-4 font-mono text-xs text-gray-500 dark:text-gray-400"},be={class:"px-6 py-4"},we={class:"px-6 py-4"},Ve={class:"px-6 py-4 text-right"},Ce=["onClick"],Se=["onClick"],Me={class:"md:hidden space-y-4"},Le={class:"flex justify-between items-start mb-3"},$e={class:"font-bold text-lg pr-4"},De={class:"flex-shrink-0"},Te=["onClick"],je=["onClick"],Ue={class:"space-y-2 text-sm"},Ae={class:"flex justify-between"},Be={class:"font-medium text-right"},Ie={class:"flex justify-between"},Ne={class:"font-mono text-xs text-gray-500 dark:text-gray-400"},Ee={class:"flex justify-between items-center"},He={key:2,class:"mt-6 flex justify-center"},Pe={class:"flex flex-wrap -mb-1"},Oe=["innerHTML"],We={class:"text-lg font-medium border-b pb-3 mb-6"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Fe={class:"md:col-span-2"},Ke={class:"md:col-span-2"},Re={class:"md:col-span-2"},Ye=["value"],ze={class:"md:col-span-2"},Ge=["value"],Je={class:"mt-6 flex justify-end space-x-3 border-t pt-6"},Qe={class:"p-6"},Xe={class:"mt-2 text-sm text-gray-600"},Ze={class:"mt-6 flex justify-end"},ft={__name:"Index",props:{allPlaylists:Array,allSchedules:Array},setup(j){const x=Q(),y=k(()=>x.props.videotronList||{data:[]}),q=k(()=>x.props.filters||{search:""}),F=k(()=>x.props.can||{}),K=k(()=>{var d;return(d=x.props.flash)==null?void 0:d.message}),R=k(()=>{var d;return((d=x.props.flash)==null?void 0:d.type)||"info"}),C=b(!1),c=b(!1),_=b(!1),S=b(null),h=b(q.value.search),a=X({id:null,name:"",location_name:"",latitude:"",longitude:"",resolution:"",status:"active",device_id:"",password:"",playlist_id:"",schedule_id:""});Z(h,ie.debounce(d=>{I.get(route("admin.videotrons.index"),{search:d},{preserveState:!0,preserveScroll:!0,replace:!0,only:["videotronList","filters"]})},300));const Y=()=>{h.value=""},z=()=>{c.value=!1,a.reset(),a.clearErrors(),C.value=!0},U=d=>{c.value=!0,a.reset(),a.clearErrors(),a.id=d.id,a.name=d.name,a.location_name=d.location_name,a.latitude=d.latitude,a.longitude=d.longitude,a.resolution=d.resolution,a.status=d.status,a.device_id=d.device_id,a.playlist_id=d.playlist_id||"",a.schedule_id=d.schedule_id||"",C.value=!0},L=()=>{C.value=!1},G=()=>{const d=c.value?"admin.videotrons.update":"admin.videotrons.store",s=c.value?a.id:void 0;a.submit(c.value?"put":"post",route(d,s),{preserveScroll:!0,onSuccess:()=>L()})},A=d=>{S.value=d,_.value=!0},J=()=>{S.value&&I.delete(route("admin.videotrons.destroy",S.value.id),{preserveScroll:!0,onSuccess:()=>{_.value=!1}})};return(d,s)=>(i(),n(f,null,[l(o(ee),{title:"Manajemen Videotron"}),l(ae,null,{header:m(()=>s[13]||(s[13]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Manajemen Videotron",-1)])),default:m(()=>{var B;return[l(oe,{message:K.value,type:R.value},null,8,["message","type"]),e("div",re,[e("div",ue,[e("div",me,[e("div",ce,[e("div",pe,[e("div",ve,[l(v,{type:"text",modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t),placeholder:"Cari nama, lokasi, atau device ID...",class:"w-full pr-10"},null,8,["modelValue"]),h.value?(i(),n("button",{key:0,onClick:Y,type:"button",class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600","aria-label":"Clear search"},[l(o(de),{class:"h-5 w-5"})])):$("",!0)]),(B=F.value)!=null&&B.manage_videotrons?(i(),N(E,{key:0,onClick:z},{default:m(()=>[l(o(ne),{class:"h-5 w-5 mr-2"}),s[14]||(s[14]=w(" Tambah Videotron "))]),_:1})):$("",!0)]),y.value.data.length?(i(),n("div",ge,[e("div",xe,[e("table",ye,[s[15]||(s[15]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Nama"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Device ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Lokasi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Status"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Aksi")])],-1)),e("tbody",_e,[(i(!0),n(f,null,V(y.value.data,t=>(i(),n("tr",{key:t.id},[e("td",he,r(t.name),1),e("td",ke,r(t.device_id||"-"),1),e("td",be,r(t.location_name),1),e("td",we,[e("span",{class:M(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",t.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},r(t.status),3)]),e("td",Ve,[e("button",{onClick:g=>U(t),class:"p-1 mr-2 text-indigo-600 hover:text-indigo-900"},[l(o(O),{class:"h-5 w-5"})],8,Ce),e("button",{onClick:g=>A(t),class:"p-1 text-red-600 hover:text-red-900"},[l(o(W),{class:"h-5 w-5"})],8,Se)])]))),128))])])]),e("div",Me,[(i(!0),n(f,null,V(y.value.data,t=>(i(),n("div",{key:t.id,class:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg shadow"},[e("div",Le,[e("h3",$e,r(t.name),1),e("div",De,[e("button",{onClick:g=>U(t),class:"p-1 mr-2 text-indigo-600 hover:text-indigo-900"},[l(o(O),{class:"h-5 w-5"})],8,Te),e("button",{onClick:g=>A(t),class:"p-1 text-red-600 hover:text-red-900"},[l(o(W),{class:"h-5 w-5"})],8,je)])]),e("div",Ue,[e("div",Ae,[s[16]||(s[16]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Lokasi:",-1)),e("span",Be,r(t.location_name),1)]),e("div",Ie,[s[17]||(s[17]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Device ID:",-1)),e("span",Ne,r(t.device_id||"-"),1)]),e("div",Ee,[s[18]||(s[18]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Status:",-1)),e("span",{class:M(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",t.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},r(t.status),3)])])]))),128))])])):(i(),n("div",fe," Tidak ada data untuk ditampilkan. ")),y.value.links.length>3?(i(),n("div",He,[e("div",Pe,[(i(!0),n(f,null,V(y.value.links,(t,g)=>(i(),n(f,{key:g},[t.url===null?(i(),n("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:t.label},null,8,Oe)):(i(),N(o(te),{key:1,class:M(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-white focus:border-indigo-500 focus:text-indigo-500",{"bg-blue-600 text-white":t.active}]),href:t.url,innerHTML:t.label,"preserve-scroll":""},null,8,["class","href","innerHTML"]))],64))),128))])])):$("",!0)])])])]),l(P,{show:C.value,onClose:L,maxWidth:"2xl"},{default:m(()=>[e("form",{onSubmit:se(G,["prevent"]),class:"p-6",novalidate:""},[e("h2",We,r(c.value?"Edit":"Tambah")+" Videotron",1),e("div",qe,[e("div",null,[l(u,{for:"name",value:"Nama Videotron",required:""}),l(v,{id:"name",modelValue:o(a).name,"onUpdate:modelValue":s[1]||(s[1]=t=>o(a).name=t),class:"mt-1 w-full",placeholder:"Cth: VTR-JKT-01"},null,8,["modelValue"]),l(p,{message:o(a).errors.name,class:"mt-2"},null,8,["message"])]),e("div",Fe,[l(u,{for:"device_id",value:"Device ID (dari STB)"}),l(v,{id:"device_id",modelValue:o(a).device_id,"onUpdate:modelValue":s[2]||(s[2]=t=>o(a).device_id=t),class:"mt-1 w-full font-mono",placeholder:"ID unik dari perangkat Android"},null,8,["modelValue"]),l(p,{message:o(a).errors.device_id,class:"mt-2"},null,8,["message"])]),e("div",Ke,[l(u,{for:"password",value:"Password Player"}),l(v,{id:"password",modelValue:o(a).password,"onUpdate:modelValue":s[3]||(s[3]=t=>o(a).password=t),type:"password",class:"mt-1 w-full",placeholder:c.value?"Kosongkan jika tidak ingin diubah":"Min. 6 karakter"},null,8,["modelValue","placeholder"]),l(p,{message:o(a).errors.password,class:"mt-2"},null,8,["message"])]),e("div",Re,[l(u,{for:"playlist_id",value:"Playlist Musik Latar (Opsional)"}),D(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>o(a).playlist_id=t),id:"playlist_id",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[s[19]||(s[19]=e("option",{value:""},"-- Tidak Ada Musik Latar --",-1)),(i(!0),n(f,null,V(j.allPlaylists,t=>(i(),n("option",{key:t.id,value:t.id},r(t.name),9,Ye))),128))],512),[[T,o(a).playlist_id]])]),e("div",ze,[l(u,{for:"schedule_id",value:"Schedule (Opsional)"}),D(e("select",{"onUpdate:modelValue":s[5]||(s[5]=t=>o(a).schedule_id=t),id:"schedule_id",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[s[20]||(s[20]=e("option",{value:""},"-- Tidak Ada Schedule --",-1)),(i(!0),n(f,null,V(j.allSchedules,t=>(i(),n("option",{key:t.id,value:t.id},r(t.name),9,Ge))),128))],512),[[T,o(a).schedule_id]])]),e("div",null,[l(u,{for:"location_name",value:"Nama Lokasi",required:""}),l(v,{id:"location_name",modelValue:o(a).location_name,"onUpdate:modelValue":s[6]||(s[6]=t=>o(a).location_name=t),class:"mt-1 w-full",placeholder:"Cth: Mall Grand Indonesia"},null,8,["modelValue"]),l(p,{message:o(a).errors.location_name,class:"mt-2"},null,8,["message"])]),e("div",null,[l(u,{for:"latitude",value:"Latitude (Opsional)"}),l(v,{id:"latitude",modelValue:o(a).latitude,"onUpdate:modelValue":s[7]||(s[7]=t=>o(a).latitude=t),type:"number",step:"any",class:"mt-1 w-full",placeholder:"Cth: -6.2013"},null,8,["modelValue"]),l(p,{message:o(a).errors.latitude,class:"mt-2"},null,8,["message"])]),e("div",null,[l(u,{for:"longitude",value:"Longitude (Opsional)"}),l(v,{id:"longitude",modelValue:o(a).longitude,"onUpdate:modelValue":s[8]||(s[8]=t=>o(a).longitude=t),type:"number",step:"any",class:"mt-1 w-full",placeholder:"Cth: 106.8225"},null,8,["modelValue"]),l(p,{message:o(a).errors.longitude,class:"mt-2"},null,8,["message"])]),e("div",null,[l(u,{for:"resolution",value:"Resolusi (Opsional)"}),l(v,{id:"resolution",modelValue:o(a).resolution,"onUpdate:modelValue":s[9]||(s[9]=t=>o(a).resolution=t),class:"mt-1 w-full",placeholder:"Cth: 1920x1080"},null,8,["modelValue"]),l(p,{message:o(a).errors.resolution,class:"mt-2"},null,8,["message"])]),e("div",null,[l(u,{for:"status",value:"Status",required:""}),D(e("select",{"onUpdate:modelValue":s[10]||(s[10]=t=>o(a).status=t),id:"status",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},s[21]||(s[21]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"maintenance"},"Maintenance",-1)]),512),[[T,o(a).status]]),l(p,{message:o(a).errors.status,class:"mt-2"},null,8,["message"])])]),e("div",Je,[l(H,{onClick:L},{default:m(()=>s[22]||(s[22]=[w("Batal")])),_:1}),l(E,{disabled:o(a).processing,class:M({"opacity-25":o(a).processing})},{default:m(()=>[w(r(c.value?"Update":"Simpan"),1)]),_:1},8,["disabled","class"])])],32)]),_:1},8,["show"]),l(P,{show:_.value,onClose:s[12]||(s[12]=t=>_.value=!1),maxWidth:"md"},{default:m(()=>{var t;return[e("div",Qe,[s[25]||(s[25]=e("h2",{class:"text-lg font-medium"},"Konfirmasi Hapus",-1)),e("p",Xe,'Yakin ingin menghapus videotron "'+r((t=S.value)==null?void 0:t.name)+'"?',1),e("div",Ze,[l(H,{onClick:s[11]||(s[11]=g=>_.value=!1)},{default:m(()=>s[23]||(s[23]=[w("Batal")])),_:1}),l(le,{onClick:J,class:"ml-3"},{default:m(()=>s[24]||(s[24]=[w("Ya, Hapus")])),_:1})])])]}),_:1},8,["show"])]}),_:1})],64))}};export{ft as default};
