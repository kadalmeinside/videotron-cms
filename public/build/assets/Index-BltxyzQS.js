import{j as N,i as m,x as P,f as i,o as l,a as s,u as d,g as B,w as g,b as t,e as f,d as E,p as V,F as x,l as _,t as n,v as S,h as T,W as K}from"./app-uG_Ut-Td.js";import{A as M}from"./AuthenticatedLayout-XBVBvuiC.js";import{_ as W}from"./PrimaryButton-Cf_dIBSR.js";import{_ as j}from"./SecondaryButton-BTBcrxEK.js";import{_ as y}from"./InputLabel-BieNfq3Q.js";import{_ as $}from"./TextInput-D9MmRmYL.js";import{_ as I}from"./Pagination-v1e9kfcg.js";import{r as R}from"./ArrowDownTrayIcon-DHZerikS.js";import{r as q}from"./XMarkIcon-CvPTwrjB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"pb-12 pt-4"},G={class:"max-w-full mx-auto space-y-6"},H={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6"},O={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center"},Q=["href"],X=["value"],Y=["value"],Z={class:"flex gap-x-2"},tt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},et={class:"overflow-x-auto"},at={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},rt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},st={key:0},dt={colspan:"5",class:"px-6 py-10 text-center text-gray-500 dark:text-gray-400"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},it={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},pt={key:0,class:"p-4 border-t border-gray-200 dark:border-gray-700"},ht={__name:"Index",setup(ut){const p=N(),u=m(()=>p.props.logs||{data:[],links:[]}),c=m(()=>p.props.filters||{}),D=m(()=>p.props.allVideotrons||[]),F=m(()=>p.props.allClients||[]),r=P({date_start:c.value.date_start||"",date_end:c.value.date_end||"",videotron_id:c.value.videotron_id||"",client_id:c.value.client_id||""}),L=()=>{r.get(route("admin.reports.index"),{preserveState:!0,preserveScroll:!0})},C=()=>{K.get(route("admin.reports.index"))},U=o=>o?new Date(o).toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",A=m(()=>{const o=new URLSearchParams;return r.date_start&&o.append("date_start",r.date_start),r.date_end&&o.append("date_end",r.date_end),r.videotron_id&&o.append("videotron_id",r.videotron_id),r.client_id&&o.append("client_id",r.client_id),`${route("admin.reports.export")}?${o.toString()}`});return(o,e)=>(l(),i(x,null,[s(d(B),{title:"Laporan Tayang"}),s(M,null,{header:g(()=>e[4]||(e[4]=[t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Laporan Proof-of-Play ",-1)])),default:g(()=>[t("div",z,[t("div",G,[t("div",H,[t("div",J,[t("div",O,[e[6]||(e[6]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 sm:mb-0"},"Filter Laporan",-1)),t("a",{href:A.value,class:"inline-flex items-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"},[s(d(R),{class:"-ml-0.5 mr-1.5 h-5 w-5"}),e[5]||(e[5]=f(" Ekspor Excel "))],8,Q)]),t("form",{onSubmit:E(L,["prevent"]),class:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end"},[t("div",null,[s(y,{for:"date_start",value:"Dari Tanggal"}),s($,{id:"date_start",type:"date",class:"mt-1 block w-full",modelValue:d(r).date_start,"onUpdate:modelValue":e[0]||(e[0]=a=>d(r).date_start=a)},null,8,["modelValue"])]),t("div",null,[s(y,{for:"date_end",value:"Sampai Tanggal"}),s($,{id:"date_end",type:"date",class:"mt-1 block w-full",modelValue:d(r).date_end,"onUpdate:modelValue":e[1]||(e[1]=a=>d(r).date_end=a)},null,8,["modelValue"])]),t("div",null,[s(y,{for:"videotron_id",value:"Videotron"}),V(t("select",{id:"videotron_id","onUpdate:modelValue":e[2]||(e[2]=a=>d(r).videotron_id=a),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[--color-primary-500] dark:focus:border-[--color-primary-600] focus:ring-[--color-primary-500] dark:focus:ring-[--color-primary-600] rounded-md shadow-sm"},[e[7]||(e[7]=t("option",{value:""},"Semua Videotron",-1)),(l(!0),i(x,null,_(D.value,a=>(l(),i("option",{key:a.id,value:a.id},n(a.name),9,X))),128))],512),[[S,d(r).videotron_id]])]),t("div",null,[s(y,{for:"client_id",value:"Klien"}),V(t("select",{id:"client_id","onUpdate:modelValue":e[3]||(e[3]=a=>d(r).client_id=a),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[--color-primary-500] dark:focus:border-[--color-primary-600] focus:ring-[--color-primary-500] dark:focus:ring-[--color-primary-600] rounded-md shadow-sm"},[e[8]||(e[8]=t("option",{value:""},"Semua Klien",-1)),(l(!0),i(x,null,_(F.value,a=>(l(),i("option",{key:a.id,value:a.id},n(a.company_name),9,Y))),128))],512),[[S,d(r).client_id]])]),t("div",Z,[s(W,{disabled:d(r).processing},{default:g(()=>e[9]||(e[9]=[f("Filter")])),_:1},8,["disabled"]),s(j,{onClick:C,type:"button"},{default:g(()=>e[10]||(e[10]=[f("Reset")])),_:1})])],32)])]),t("div",tt,[t("div",et,[t("table",at,[e[13]||(e[13]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Waktu Tayang"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Media"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Klien"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Playlist"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Videotron")])],-1)),t("tbody",rt,[u.value.data.length?T("",!0):(l(),i("tr",st,[t("td",dt,[s(d(q),{class:"mx-auto h-12 w-12 text-gray-400"}),e[11]||(e[11]=t("h3",{class:"mt-2 text-sm font-semibold"},"Tidak Ada Data",-1)),e[12]||(e[12]=t("p",{class:"mt-1 text-sm"},"Tidak ada data untuk ditampilkan. Coba sesuaikan filter Anda.",-1))])])),(l(!0),i(x,null,_(u.value.data,a=>{var v,k,b,w,h;return l(),i("tr",{key:a.id},[t("td",ot,n(U(a.played_at)),1),t("td",it,n((v=a.media)==null?void 0:v.title),1),t("td",lt,n((b=(k=a.media)==null?void 0:k.client)==null?void 0:b.company_name),1),t("td",nt,n((w=a.playlist)==null?void 0:w.name),1),t("td",mt,n((h=a.videotron)==null?void 0:h.name),1)])}),128))])])]),u.value.data.length>0?(l(),i("div",pt,[s(I,{links:u.value.links},null,8,["links"])])):T("",!0)])])])]),_:1})],64))}};export{ht as default};
