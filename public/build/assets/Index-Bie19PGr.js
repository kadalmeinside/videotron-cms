import{f as n,o as d,b as e,j as ae,i as C,r as y,x as le,k as oe,W as U,a as l,u as o,g as de,w as g,h as O,c as P,p as L,v as j,e as S,F as k,l as M,t as i,n as b,S as re,d as ne}from"./app-BLeNn4LO.js";import{A as ie}from"./AuthenticatedLayout-HllnW7fv.js";import{_ as Z}from"./PrimaryButton-6Sj3evt6.js";import{_ as W}from"./SecondaryButton-DvDU7CXS.js";import{_ as q,D as ue}from"./Modal-xru5_Yyr.js";import{_ as x}from"./InputError-Bjz1dp-D.js";import{_ as p}from"./InputLabel-CgxTHTmz.js";import{_}from"./TextInput-DSC7ne63.js";import{_ as ce,r as pe}from"./Toast-k947icgK.js";import{l as me}from"./lodash-BnKdaLBk.js";import{r as ge}from"./PlusIcon-CiPOsjGh.js";import{r as K,a as R}from"./TrashIcon-DwDMB_nq.js";import"./XMarkIcon-CnMNgzJZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ExclamationTriangleIcon-Dbmr1S3L.js";function Y(m,v){return d(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z","clip-rule":"evenodd"})])}function z(m,v){return d(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M9.25 13.25a.75.75 0 0 0 1.5 0V4.636l2.955 3.129a.75.75 0 0 0 1.09-1.03l-4.25-4.5a.75.75 0 0 0-1.09 0l-4.25 4.5a.75.75 0 1 0 1.09 1.03L9.25 4.636v8.614Z"}),e("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})])}function ve(m,v){return d(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm.75-13a.75.75 0 0 0-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 0 0 0-1.5h-3.25V5Z","clip-rule":"evenodd"})])}const fe={class:"pb-12 pt-4"},xe={class:"max-w-full mx-auto"},_e={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ye={class:"p-6 text-gray-900 dark:text-gray-100"},ke={class:"mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4"},he={class:"flex flex-col sm:flex-row gap-4 w-full md:w-auto"},be={class:"relative w-full sm:w-64"},we={key:0,class:"text-center py-12 text-gray-500"},Ve={key:1},Ce={class:"hidden md:block overflow-x-auto"},Se={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Me={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},$e={class:"px-6 py-4 font-medium"},Ae={class:"px-6 py-4"},Te={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"},Ue={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"},Le={class:"px-6 py-4 text-sm"},je={key:0,class:"text-yellow-600 dark:text-yellow-400 font-bold",title:"Versi lama"},Ne={key:1,class:"text-gray-500 dark:text-gray-400"},Oe={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},De={class:"px-6 py-4 text-right space-x-2"},Be=["onClick","disabled"],Fe=["onClick","disabled"],He=["onClick"],Ie=["onClick"],Ee={class:"md:hidden space-y-4"},Pe={class:"flex justify-between items-start mb-3"},Ze={class:"font-bold text-lg pr-4"},We={class:"flex-shrink-0"},qe=["onClick","disabled"],Ke=["onClick","disabled"],Re=["onClick"],Ye=["onClick"],ze={class:"space-y-2 text-sm"},Ge={class:"flex justify-between"},Je={class:"font-mono text-xs text-gray-500 dark:text-gray-400"},Qe={class:"flex justify-between items-center"},Xe={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"},et={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"},tt={class:"flex justify-between items-center"},st={key:0,class:"text-yellow-600 dark:text-yellow-400 font-bold",title:"Versi lama"},at={key:1,class:"text-gray-500 dark:text-gray-400"},lt={class:"flex justify-between items-center text-gray-500 dark:text-gray-400"},ot={key:2,class:"mt-6 flex justify-center"},dt={class:"flex flex-wrap -mb-1"},rt=["innerHTML"],nt={class:"text-lg font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-3 mb-6"},it={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ut={class:"md:col-span-2"},ct={class:"md:col-span-2"},pt={class:"md:col-span-2"},mt=["value"],gt={class:"md:col-span-2"},vt=["value"],ft={class:"mt-6 flex justify-end space-x-3 border-t border-gray-200 dark:border-gray-700 pt-6"},xt={class:"p-6"},_t={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},yt={class:"mt-6 flex justify-end"},Ot={__name:"Index",props:{allPlaylists:Array,allSchedules:Array,latest_app_version:Number},setup(m){const v=ae(),w=C(()=>v.props.videotronList||{data:[]}),D=C(()=>v.props.filters||{search:"",status:""}),G=C(()=>v.props.can||{}),J=C(()=>{var r;return(r=v.props.flash)==null?void 0:r.message}),Q=C(()=>{var r;return((r=v.props.flash)==null?void 0:r.type)||"info"}),$=y(!1),f=y(!1),V=y(!1),A=y(null),h=y(D.value.search),T=y(D.value.status),u=y(null),a=le({id:null,name:"",location_name:"",latitude:"",longitude:"",resolution:"",status:"active",device_id:"",password:"",playlist_id:"",schedule_id:""});oe([h,T],me.debounce(()=>{U.get(route("admin.videotrons.index"),{search:h.value,status:T.value},{preserveState:!0,preserveScroll:!0,replace:!0,only:["videotronList","filters"]})},300));const X=()=>{h.value=""},B=r=>{u.value=r.id+"_sync",U.post(route("admin.videotrons.force-sync",r.id),{},{preserveScroll:!0,onFinish:()=>{u.value=null}})},F=r=>{u.value=r.id+"_update",U.post(route("admin.videotrons.force-update",r.id),{},{preserveScroll:!0,onFinish:()=>{u.value=null}})},ee=()=>{f.value=!1,a.reset(),a.clearErrors(),$.value=!0},H=r=>{f.value=!0,a.reset(),a.clearErrors(),a.id=r.id,a.name=r.name,a.location_name=r.location_name,a.latitude=r.latitude,a.longitude=r.longitude,a.resolution=r.resolution,a.status=r.status,a.device_id=r.device_id,a.playlist_id=r.playlist_id||"",a.schedule_id=r.schedule_id||"",$.value=!0},N=()=>{$.value=!1},te=()=>{const r=f.value?"admin.videotrons.update":"admin.videotrons.store",s=f.value?a.id:void 0;a.submit(f.value?"put":"post",route(r,s),{preserveScroll:!0,onSuccess:()=>N()})},I=r=>{A.value=r,V.value=!0},se=()=>{A.value&&U.delete(route("admin.videotrons.destroy",A.value.id),{preserveScroll:!0,onSuccess:()=>{V.value=!1}})};return(r,s)=>(d(),n(k,null,[l(o(de),{title:"Manajemen Videotron"}),l(ie,null,{header:g(()=>s[14]||(s[14]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Manajemen Videotron",-1)])),default:g(()=>{var E;return[l(ce,{message:J.value,type:Q.value},null,8,["message","type"]),e("div",fe,[e("div",xe,[e("div",_e,[e("div",ye,[e("div",ke,[e("div",he,[e("div",be,[l(_,{type:"text",modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t),placeholder:"Cari...",class:"w-full pr-10"},null,8,["modelValue"]),h.value?(d(),n("button",{key:0,onClick:X,type:"button",class:"absolute inset-y-0 right-0 flex items-center pr-3"},[l(o(pe),{class:"h-5 w-5 text-gray-400"})])):O("",!0)]),L(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>T.value=t),class:"w-full sm:w-48 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},s[15]||(s[15]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"online"},"Online",-1),e("option",{value:"offline"},"Offline",-1)]),512),[[j,T.value]])]),(E=G.value)!=null&&E.manage_videotrons?(d(),P(Z,{key:0,onClick:ee},{default:g(()=>[l(o(ge),{class:"h-5 w-5 mr-2"}),s[16]||(s[16]=S(" Tambah Videotron "))]),_:1})):O("",!0)]),w.value.data.length?(d(),n("div",Ve,[e("div",Ce,[e("table",Se,[s[17]||(s[17]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Nama"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Status Online"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Versi App"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Terakhir Terlihat"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Aksi")])],-1)),e("tbody",Me,[(d(!0),n(k,null,M(w.value.data,t=>(d(),n("tr",{key:t.id},[e("td",$e,i(t.name),1),e("td",Ae,[t.is_online?(d(),n("span",Te,"Online")):(d(),n("span",Ue,"Offline"))]),e("td",Le,[t.app_version_code<m.latest_app_version?(d(),n("span",je,i(t.app_version_code||"N/A"),1)):(d(),n("span",Ne,i(t.app_version_code||"N/A"),1))]),e("td",Oe,i(t.last_seen_at_for_humans),1),e("td",De,[e("button",{onClick:c=>F(t),class:"p-1 text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t.fcm_token||u.value||t.app_version_code>=m.latest_app_version,title:"Force Update App"},[l(o(z),{class:b(["h-5 w-5",{"animate-spin":u.value===t.id+"_update"}])},null,8,["class"])],8,Be),e("button",{onClick:c=>B(t),class:"p-1 text-sky-600 hover:text-sky-900 dark:text-sky-400 dark:hover:text-sky-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t.fcm_token||u.value,title:"Force Sync Content"},[l(o(Y),{class:b(["h-5 w-5",{"animate-spin":u.value===t.id+"_sync"}])},null,8,["class"])],8,Fe),e("button",{onClick:c=>H(t),class:"p-1 text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},[l(o(K),{class:"h-5 w-5"})],8,He),e("button",{onClick:c=>I(t),class:"p-1 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[l(o(R),{class:"h-5 w-5"})],8,Ie)])]))),128))])])]),e("div",Ee,[(d(!0),n(k,null,M(w.value.data,t=>(d(),n("div",{key:t.id,class:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg shadow"},[e("div",Pe,[e("h3",Ze,i(t.name),1),e("div",We,[e("button",{onClick:c=>F(t),class:"p-1 mr-2 text-orange-600 hover:text-orange-900 disabled:opacity-50",disabled:!t.fcm_token||u.value||t.app_version_code>=m.latest_app_version,title:"Force Update App"},[l(o(z),{class:b(["h-5 w-5",{"animate-spin":u.value===t.id+"_update"}])},null,8,["class"])],8,qe),e("button",{onClick:c=>B(t),class:"p-1 mr-2 text-sky-600 hover:text-sky-900 disabled:opacity-50",disabled:!t.fcm_token||u.value,title:"Force Sync Content"},[l(o(Y),{class:b(["h-5 w-5",{"animate-spin":u.value===t.id+"_sync"}])},null,8,["class"])],8,Ke),e("button",{onClick:c=>H(t),class:"p-1 mr-2 text-indigo-600 hover:text-indigo-900"},[l(o(K),{class:"h-5 w-5"})],8,Re),e("button",{onClick:c=>I(t),class:"p-1 text-red-600 hover:text-red-900"},[l(o(R),{class:"h-5 w-5"})],8,Ye)])]),e("div",ze,[e("div",Ge,[s[18]||(s[18]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Device ID:",-1)),e("span",Je,i(t.device_id||"-"),1)]),e("div",Qe,[s[19]||(s[19]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Status Online:",-1)),e("div",null,[t.is_online?(d(),n("span",Xe,"Online")):(d(),n("span",et,"Offline"))])]),e("div",tt,[s[20]||(s[20]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Versi App:",-1)),t.app_version_code<m.latest_app_version?(d(),n("span",st,i(t.app_version_code||"N/A"),1)):(d(),n("span",at,i(t.app_version_code||"N/A"),1))]),e("div",lt,[l(o(ve),{class:"h-4 w-4 mr-1"}),e("span",null,i(t.last_seen_at_for_humans),1)])])]))),128))])])):(d(),n("div",we," Tidak ada data untuk ditampilkan. ")),w.value.links.length>3?(d(),n("div",ot,[e("div",dt,[(d(!0),n(k,null,M(w.value.links,(t,c)=>(d(),n(k,{key:c},[t.url===null?(d(),n("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:t.label},null,8,rt)):(d(),P(o(re),{key:1,class:b(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-white dark:hover:bg-gray-700 focus:border-indigo-500 focus:text-indigo-500",{"bg-blue-600 text-white dark:bg-blue-500":t.active}]),href:t.url,innerHTML:t.label,"preserve-scroll":""},null,8,["class","href","innerHTML"]))],64))),128))])])):O("",!0)])])])]),l(q,{show:$.value,onClose:N,maxWidth:"2xl"},{default:g(()=>[e("form",{onSubmit:ne(te,["prevent"]),class:"p-6",novalidate:""},[e("h2",nt,i(f.value?"Edit":"Tambah")+" Videotron",1),e("div",it,[e("div",null,[l(p,{for:"name",value:"Nama Videotron",required:""}),l(_,{id:"name",modelValue:o(a).name,"onUpdate:modelValue":s[2]||(s[2]=t=>o(a).name=t),class:"mt-1 w-full",placeholder:"Cth: VTR-JKT-01"},null,8,["modelValue"]),l(x,{message:o(a).errors.name,class:"mt-2"},null,8,["message"])]),e("div",ut,[l(p,{for:"device_id",value:"Device ID (dari STB)"}),l(_,{id:"device_id",modelValue:o(a).device_id,"onUpdate:modelValue":s[3]||(s[3]=t=>o(a).device_id=t),class:"mt-1 w-full font-mono",placeholder:"ID unik dari perangkat Android"},null,8,["modelValue"]),l(x,{message:o(a).errors.device_id,class:"mt-2"},null,8,["message"])]),e("div",ct,[l(p,{for:"password",value:"Password Player"}),l(_,{id:"password",modelValue:o(a).password,"onUpdate:modelValue":s[4]||(s[4]=t=>o(a).password=t),type:"password",class:"mt-1 w-full",placeholder:f.value?"Kosongkan jika tidak ingin diubah":"Min. 6 karakter"},null,8,["modelValue","placeholder"]),l(x,{message:o(a).errors.password,class:"mt-2"},null,8,["message"])]),e("div",pt,[l(p,{for:"playlist_id",value:"Playlist Musik Latar (Opsional)"}),L(e("select",{"onUpdate:modelValue":s[5]||(s[5]=t=>o(a).playlist_id=t),id:"playlist_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[s[21]||(s[21]=e("option",{value:""},"-- Tidak Ada Musik Latar --",-1)),(d(!0),n(k,null,M(m.allPlaylists,t=>(d(),n("option",{key:t.id,value:t.id},i(t.name),9,mt))),128))],512),[[j,o(a).playlist_id]])]),e("div",gt,[l(p,{for:"schedule_id",value:"Schedule (Opsional)"}),L(e("select",{"onUpdate:modelValue":s[6]||(s[6]=t=>o(a).schedule_id=t),id:"schedule_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[s[22]||(s[22]=e("option",{value:""},"-- Tidak Ada Schedule --",-1)),(d(!0),n(k,null,M(m.allSchedules,t=>(d(),n("option",{key:t.id,value:t.id},i(t.name),9,vt))),128))],512),[[j,o(a).schedule_id]])]),e("div",null,[l(p,{for:"location_name",value:"Nama Lokasi",required:""}),l(_,{id:"location_name",modelValue:o(a).location_name,"onUpdate:modelValue":s[7]||(s[7]=t=>o(a).location_name=t),class:"mt-1 w-full",placeholder:"Cth: Mall Grand Indonesia"},null,8,["modelValue"]),l(x,{message:o(a).errors.location_name,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"latitude",value:"Latitude (Opsional)"}),l(_,{id:"latitude",modelValue:o(a).latitude,"onUpdate:modelValue":s[8]||(s[8]=t=>o(a).latitude=t),type:"number",step:"any",class:"mt-1 w-full",placeholder:"Cth: -6.2013"},null,8,["modelValue"]),l(x,{message:o(a).errors.latitude,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"longitude",value:"Longitude (Opsional)"}),l(_,{id:"longitude",modelValue:o(a).longitude,"onUpdate:modelValue":s[9]||(s[9]=t=>o(a).longitude=t),type:"number",step:"any",class:"mt-1 w-full",placeholder:"Cth: 106.8225"},null,8,["modelValue"]),l(x,{message:o(a).errors.longitude,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"resolution",value:"Resolusi (Opsional)"}),l(_,{id:"resolution",modelValue:o(a).resolution,"onUpdate:modelValue":s[10]||(s[10]=t=>o(a).resolution=t),class:"mt-1 w-full",placeholder:"Cth: 1920x1080"},null,8,["modelValue"]),l(x,{message:o(a).errors.resolution,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"status",value:"Status",required:""}),L(e("select",{"onUpdate:modelValue":s[11]||(s[11]=t=>o(a).status=t),id:"status",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},s[23]||(s[23]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"maintenance"},"Maintenance",-1)]),512),[[j,o(a).status]]),l(x,{message:o(a).errors.status,class:"mt-2"},null,8,["message"])])]),e("div",ft,[l(W,{onClick:N},{default:g(()=>s[24]||(s[24]=[S("Batal")])),_:1}),l(Z,{disabled:o(a).processing,class:b({"opacity-25":o(a).processing})},{default:g(()=>[S(i(f.value?"Update":"Simpan"),1)]),_:1},8,["disabled","class"])])],32)]),_:1},8,["show"]),l(q,{show:V.value,onClose:s[13]||(s[13]=t=>V.value=!1),maxWidth:"md"},{default:g(()=>{var t;return[e("div",xt,[s[27]||(s[27]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Konfirmasi Hapus",-1)),e("p",_t,'Yakin ingin menghapus videotron "'+i((t=A.value)==null?void 0:t.name)+'"?',1),e("div",yt,[l(W,{onClick:s[12]||(s[12]=c=>V.value=!1)},{default:g(()=>s[25]||(s[25]=[S("Batal")])),_:1}),l(ue,{onClick:se,class:"ml-3"},{default:g(()=>s[26]||(s[26]=[S("Ya, Hapus")])),_:1})])])]}),_:1},8,["show"])]}),_:1})],64))}};export{Ot as default};
