import{f as d,o as a,b as e,h as w,F as u,l as _,c as h,w as p,e as c,u as i,S as v,n as P,j as U,i as x,x as H,a as l,g as E,d as K,q as j,t as y,v as M,W}from"./app-D5jj9jN6.js";import{A as z}from"./AuthenticatedLayout-FH42ZQ7d.js";import{_ as I}from"./PrimaryButton-BXrArDxD.js";import{_ as R}from"./SecondaryButton-ZqUIV-GI.js";import{_ as b}from"./InputLabel-AzlQdYHy.js";import{_ as C}from"./TextInput-BHTSabko.js";import{r as q}from"./XMarkIcon-DDGvOkuk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function G(f,m){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}const J={key:0,"aria-label":"Pagination"},O={class:"flex items-center justify-center -space-y-px text-sm"},Q={key:1,class:"flex items-center justify-center px-4 h-9 ms-0 leading-tight text-gray-400 bg-white border border-gray-300 rounded-lg cursor-not-allowed dark:bg-gray-800 dark:border-gray-700 dark:text-gray-500 mx-1"},X={key:1,class:"flex items-center justify-center px-4 h-9 leading-tight text-gray-400 bg-white border border-gray-300 rounded-lg cursor-not-allowed dark:bg-gray-800 dark:border-gray-700 dark:text-gray-500 mx-1"},Y=["innerHTML"],Z={__name:"Pagination",props:{links:{type:Array,default:()=>[]}},setup(f){return(m,n)=>f.links.length>3?(a(),d("nav",J,[e("ul",O,[(a(!0),d(u,null,_(f.links,(o,k)=>(a(),d("li",{key:k},[o.label.includes("Previous")?(a(),d(u,{key:0},[o.url?(a(),h(i(v),{key:0,href:o.url,class:"flex items-center justify-center px-4 h-9 ms-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white mx-1"},{default:p(()=>n[0]||(n[0]=[c(" < Back ")])),_:2},1032,["href"])):(a(),d("span",Q," < Back "))],64)):o.label.includes("Next")?(a(),d(u,{key:1},[o.url?(a(),h(i(v),{key:0,href:o.url,class:"flex items-center justify-center px-4 h-9 leading-tight text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white mx-1"},{default:p(()=>n[1]||(n[1]=[c(" Next > ")])),_:2},1032,["href"])):(a(),d("span",X," Next > "))],64)):(a(),d(u,{key:2},[o.url?(a(),h(i(v),{key:0,href:o.url,class:P(["flex items-center justify-center px-4 h-9 leading-tight mx-1 rounded-lg",{"z-10 text-white bg-gray-900 border border-gray-900 hover:bg-gray-800 dark:bg-gray-700 dark:border-gray-600":o.active,"text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white":!o.active}]),innerHTML:o.label},null,8,["href","class","innerHTML"])):(a(),d("span",{key:1,class:"flex items-center justify-center px-4 h-9 leading-tight text-gray-500 bg-white border border-gray-300 rounded-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 mx-1",innerHTML:o.label},null,8,Y))],64))]))),128))])])):w("",!0)}},ee={class:"pb-12 pt-4"},te={class:"max-w-full mx-auto space-y-6"},re={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ae={class:"p-6"},de={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center"},se=["href"],oe=["value"],ie=["value"],le={class:"flex gap-x-2"},ne={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ge={class:"overflow-x-auto"},ue={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ye={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},me={key:0},pe={colspan:"5",class:"px-6 py-10 text-center text-gray-500 dark:text-gray-400"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ce={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},_e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},ke={key:0,class:"p-4 border-t border-gray-200 dark:border-gray-700"},je={__name:"Index",setup(f){const m=U(),n=x(()=>m.props.logs||{data:[],links:[]}),o=x(()=>m.props.filters||{}),k=x(()=>m.props.allVideotrons||[]),A=x(()=>m.props.allClients||[]),s=H({date_start:o.value.date_start||"",date_end:o.value.date_end||"",videotron_id:o.value.videotron_id||"",client_id:o.value.client_id||""}),B=()=>{s.get(route("admin.reports.index"),{preserveState:!0,preserveScroll:!0})},D=()=>{W.get(route("admin.reports.index"))},F=g=>g?new Date(g).toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",N=x(()=>{const g=new URLSearchParams;return s.date_start&&g.append("date_start",s.date_start),s.date_end&&g.append("date_end",s.date_end),s.videotron_id&&g.append("videotron_id",s.videotron_id),s.client_id&&g.append("client_id",s.client_id),`${route("admin.reports.export")}?${g.toString()}`});return(g,t)=>(a(),d(u,null,[l(i(E),{title:"Laporan Tayang"}),l(z,null,{header:p(()=>t[4]||(t[4]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Laporan Proof-of-Play ",-1)])),default:p(()=>[e("div",ee,[e("div",te,[e("div",re,[e("div",ae,[e("div",de,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 sm:mb-0"},"Filter Laporan",-1)),e("a",{href:N.value,class:"inline-flex items-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"},[l(i(G),{class:"-ml-0.5 mr-1.5 h-5 w-5"}),t[5]||(t[5]=c(" Ekspor Excel "))],8,se)]),e("form",{onSubmit:K(B,["prevent"]),class:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end"},[e("div",null,[l(b,{for:"date_start",value:"Dari Tanggal"}),l(C,{id:"date_start",type:"date",class:"mt-1 block w-full",modelValue:i(s).date_start,"onUpdate:modelValue":t[0]||(t[0]=r=>i(s).date_start=r)},null,8,["modelValue"])]),e("div",null,[l(b,{for:"date_end",value:"Sampai Tanggal"}),l(C,{id:"date_end",type:"date",class:"mt-1 block w-full",modelValue:i(s).date_end,"onUpdate:modelValue":t[1]||(t[1]=r=>i(s).date_end=r)},null,8,["modelValue"])]),e("div",null,[l(b,{for:"videotron_id",value:"Videotron"}),j(e("select",{id:"videotron_id","onUpdate:modelValue":t[2]||(t[2]=r=>i(s).videotron_id=r),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[--color-primary-500] dark:focus:border-[--color-primary-600] focus:ring-[--color-primary-500] dark:focus:ring-[--color-primary-600] rounded-md shadow-sm"},[t[7]||(t[7]=e("option",{value:""},"Semua Videotron",-1)),(a(!0),d(u,null,_(k.value,r=>(a(),d("option",{key:r.id,value:r.id},y(r.name),9,oe))),128))],512),[[M,i(s).videotron_id]])]),e("div",null,[l(b,{for:"client_id",value:"Klien"}),j(e("select",{id:"client_id","onUpdate:modelValue":t[3]||(t[3]=r=>i(s).client_id=r),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[--color-primary-500] dark:focus:border-[--color-primary-600] focus:ring-[--color-primary-500] dark:focus:ring-[--color-primary-600] rounded-md shadow-sm"},[t[8]||(t[8]=e("option",{value:""},"Semua Klien",-1)),(a(!0),d(u,null,_(A.value,r=>(a(),d("option",{key:r.id,value:r.id},y(r.company_name),9,ie))),128))],512),[[M,i(s).client_id]])]),e("div",le,[l(I,{disabled:i(s).processing},{default:p(()=>t[9]||(t[9]=[c("Filter")])),_:1},8,["disabled"]),l(R,{onClick:D,type:"button"},{default:p(()=>t[10]||(t[10]=[c("Reset")])),_:1})])],32)])]),e("div",ne,[e("div",ge,[e("table",ue,[t[13]||(t[13]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Waktu Tayang"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Media"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Klien"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Playlist"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Videotron")])],-1)),e("tbody",ye,[n.value.data.length?w("",!0):(a(),d("tr",me,[e("td",pe,[l(i(q),{class:"mx-auto h-12 w-12 text-gray-400"}),t[11]||(t[11]=e("h3",{class:"mt-2 text-sm font-semibold"},"Tidak Ada Data",-1)),t[12]||(t[12]=e("p",{class:"mt-1 text-sm"},"Tidak ada data untuk ditampilkan. Coba sesuaikan filter Anda.",-1))])])),(a(!0),d(u,null,_(n.value.data,r=>{var V,S,$,L,T;return a(),d("tr",{key:r.id},[e("td",xe,y(F(r.played_at)),1),e("td",ce,y((V=r.media)==null?void 0:V.title),1),e("td",fe,y(($=(S=r.media)==null?void 0:S.client)==null?void 0:$.company_name),1),e("td",be,y((L=r.playlist)==null?void 0:L.name),1),e("td",_e,y((T=r.videotron)==null?void 0:T.name),1)])}),128))])])]),n.value.data.length>0?(a(),d("div",ke,[l(Z,{links:n.value.links},null,8,["links"])])):w("",!0)])])])]),_:1})],64))}};export{je as default};
