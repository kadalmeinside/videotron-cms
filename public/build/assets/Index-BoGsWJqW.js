import{j as K,i as v,r as g,x as O,k as P,W as S,f as w,o as x,a,u as o,g as H,w as n,b as e,c as R,h as Y,e as _,F as $,l as z,t as p,n as D,d as G,q as J,v as Q}from"./app-CPhxPLrA.js";import{A as X}from"./AuthenticatedLayout-CzYuN022.js";import{_ as U}from"./PrimaryButton-DgYbJ7mL.js";import{_ as L}from"./SecondaryButton-BTLkx_dz.js";import{_ as T,D as Z}from"./Modal-COFi4xGw.js";import{_ as r}from"./InputError-o7bhdqJK.js";import{_ as u}from"./InputLabel-B_wm-awJ.js";import{_ as m}from"./TextInput-CE9FDaPe.js";import{_ as ee}from"./Toast-BtswQNda.js";import{l as te}from"./lodash-CbooYyeo.js";import{r as se,a as ae,b as le}from"./TrashIcon-DsQC1B0x.js";import"./XMarkIcon-Cg4hbH_O.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"pb-12 pt-4"},de={class:"max-w-full mx-auto"},ne={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ie={class:"p-6 text-gray-900 dark:text-gray-100"},re={class:"mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4"},ue={class:"overflow-x-auto"},me={class:"min-w-full divide-y divide-gray-200"},pe={class:"bg-white divide-y divide-gray-200"},ce={key:0},fe={class:"px-6 py-4 font-medium"},ve={class:"px-6 py-4 font-mono text-xs text-gray-500"},ge={class:"px-6 py-4"},xe={class:"px-6 py-4"},_e={class:"px-6 py-4 text-right"},ye=["onClick"],he=["onClick"],we={class:"text-lg font-medium border-b pb-3 mb-6"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},be={class:"md:col-span-2"},ke={class:"md:col-span-2"},Ce={class:"mt-6 flex justify-end space-x-3 border-t pt-6"},Me={class:"p-6"},Se={class:"mt-2 text-sm text-gray-600"},$e={class:"mt-6 flex justify-end"},Oe={__name:"Index",setup(De){const c=K(),k=v(()=>c.props.videotronList||{data:[]}),B=v(()=>c.props.filters||{search:""}),N=v(()=>c.props.can||{}),j=v(()=>{var d;return(d=c.props.flash)==null?void 0:d.message}),E=v(()=>{var d;return((d=c.props.flash)==null?void 0:d.type)||"info"}),y=g(!1),i=g(!1),f=g(!1),h=g(null),V=g(B.value.search),s=O({id:null,name:"",location_name:"",latitude:"",longitude:"",resolution:"",status:"active",device_id:"",password:""});P(V,te.debounce(d=>{S.get(route("admin.videotrons.index"),{search:d},{preserveState:!0,preserveScroll:!0,replace:!0,only:["videotronList","filters"]})},300));const I=()=>{i.value=!1,s.reset(),s.clearErrors(),y.value=!0},A=d=>{i.value=!0,s.reset(),s.clearErrors(),s.id=d.id,s.name=d.name,s.location_name=d.location_name,s.latitude=d.latitude,s.longitude=d.longitude,s.resolution=d.resolution,s.status=d.status,s.device_id=d.device_id,y.value=!0},b=()=>{y.value=!1},q=()=>{const d=i.value?"admin.videotrons.update":"admin.videotrons.store",t=i.value?s.id:void 0;s.submit(i.value?"put":"post",route(d,t),{preserveScroll:!0,onSuccess:()=>b()})},W=d=>{h.value=d,f.value=!0},F=()=>{h.value&&S.delete(route("admin.videotrons.destroy",h.value.id),{preserveScroll:!0,onSuccess:()=>{f.value=!1}})};return(d,t)=>(x(),w($,null,[a(o(H),{title:"Manajemen Videotron"}),a(X,null,{header:n(()=>t[11]||(t[11]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Manajemen Videotron",-1)])),default:n(()=>{var C;return[a(ee,{message:j.value,type:E.value},null,8,["message","type"]),e("div",oe,[e("div",de,[e("div",ne,[e("div",ie,[e("div",re,[a(m,{type:"text",modelValue:V.value,"onUpdate:modelValue":t[0]||(t[0]=l=>V.value=l),placeholder:"Cari nama atau lokasi...",class:"w-full md:max-w-md"},null,8,["modelValue"]),(C=N.value)!=null&&C.manage_videotrons?(x(),R(U,{key:0,onClick:I},{default:n(()=>[a(o(se),{class:"h-5 w-5 mr-2"}),t[12]||(t[12]=_(" Tambah Videotron "))]),_:1})):Y("",!0)]),e("div",ue,[e("table",me,[t[14]||(t[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Device ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Lokasi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi")])],-1)),e("tbody",pe,[k.value.data.length?(x(!0),w($,{key:1},z(k.value.data,l=>(x(),w("tr",{key:l.id},[e("td",fe,p(l.name),1),e("td",ve,p(l.device_id||"-"),1),e("td",ge,p(l.location_name),1),e("td",xe,[e("span",{class:D(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",l.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},p(l.status),3)]),e("td",_e,[e("button",{onClick:M=>A(l),class:"p-1 mr-2 text-indigo-600 hover:text-indigo-900"},[a(o(ae),{class:"h-5 w-5"})],8,ye),e("button",{onClick:M=>W(l),class:"p-1 text-red-600 hover:text-red-900"},[a(o(le),{class:"h-5 w-5"})],8,he)])]))),128)):(x(),w("tr",ce,t[13]||(t[13]=[e("td",{colspan:"5",class:"px-6 py-4 text-center"},"Tidak ada data.",-1)])))])])])])])])]),a(T,{show:y.value,onClose:b,maxWidth:"2xl"},{default:n(()=>[e("form",{onSubmit:G(q,["prevent"]),class:"p-6",novalidate:""},[e("h2",we,p(i.value?"Edit":"Tambah")+" Videotron",1),e("div",Ve,[e("div",null,[a(u,{for:"name",value:"Nama Videotron",required:""}),a(m,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":t[1]||(t[1]=l=>o(s).name=l),class:"mt-1 w-full",placeholder:"Cth: VTR-JKT-01"},null,8,["modelValue"]),a(r,{message:o(s).errors.name,class:"mt-2"},null,8,["message"])]),e("div",be,[a(u,{for:"device_id",value:"Device ID (dari STB)"}),a(m,{id:"device_id",modelValue:o(s).device_id,"onUpdate:modelValue":t[2]||(t[2]=l=>o(s).device_id=l),class:"mt-1 w-full font-mono",placeholder:"ID unik dari perangkat Android"},null,8,["modelValue"]),a(r,{message:o(s).errors.device_id,class:"mt-2"},null,8,["message"])]),e("div",ke,[a(u,{for:"password",value:"Password Player"}),a(m,{id:"password",modelValue:o(s).password,"onUpdate:modelValue":t[3]||(t[3]=l=>o(s).password=l),type:"password",class:"mt-1 w-full",placeholder:i.value?"Kosongkan jika tidak ingin diubah":"Min. 6 karakter"},null,8,["modelValue","placeholder"]),a(r,{message:o(s).errors.password,class:"mt-2"},null,8,["message"])]),e("div",null,[a(u,{for:"location_name",value:"Nama Lokasi",required:""}),a(m,{id:"location_name",modelValue:o(s).location_name,"onUpdate:modelValue":t[4]||(t[4]=l=>o(s).location_name=l),class:"mt-1 w-full",placeholder:"Cth: Mall Grand Indonesia"},null,8,["modelValue"]),a(r,{message:o(s).errors.location_name,class:"mt-2"},null,8,["message"])]),e("div",null,[a(u,{for:"latitude",value:"Latitude (Opsional)"}),a(m,{id:"latitude",modelValue:o(s).latitude,"onUpdate:modelValue":t[5]||(t[5]=l=>o(s).latitude=l),type:"number",step:"any",class:"mt-1 w-full",placeholder:"Cth: -6.2013"},null,8,["modelValue"]),a(r,{message:o(s).errors.latitude,class:"mt-2"},null,8,["message"])]),e("div",null,[a(u,{for:"longitude",value:"Longitude (Opsional)"}),a(m,{id:"longitude",modelValue:o(s).longitude,"onUpdate:modelValue":t[6]||(t[6]=l=>o(s).longitude=l),type:"number",step:"any",class:"mt-1 w-full",placeholder:"Cth: 106.8225"},null,8,["modelValue"]),a(r,{message:o(s).errors.longitude,class:"mt-2"},null,8,["message"])]),e("div",null,[a(u,{for:"resolution",value:"Resolusi (Opsional)"}),a(m,{id:"resolution",modelValue:o(s).resolution,"onUpdate:modelValue":t[7]||(t[7]=l=>o(s).resolution=l),class:"mt-1 w-full",placeholder:"Cth: 1920x1080"},null,8,["modelValue"]),a(r,{message:o(s).errors.resolution,class:"mt-2"},null,8,["message"])]),e("div",null,[a(u,{for:"status",value:"Status",required:""}),J(e("select",{"onUpdate:modelValue":t[8]||(t[8]=l=>o(s).status=l),id:"status",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},t[15]||(t[15]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"maintenance"},"Maintenance",-1)]),512),[[Q,o(s).status]]),a(r,{message:o(s).errors.status,class:"mt-2"},null,8,["message"])])]),e("div",Ce,[a(L,{onClick:b},{default:n(()=>t[16]||(t[16]=[_("Batal")])),_:1}),a(U,{disabled:o(s).processing,class:D({"opacity-25":o(s).processing})},{default:n(()=>[_(p(i.value?"Update":"Simpan"),1)]),_:1},8,["disabled","class"])])],32)]),_:1},8,["show"]),a(T,{show:f.value,onClose:t[10]||(t[10]=l=>f.value=!1),maxWidth:"md"},{default:n(()=>{var l;return[e("div",Me,[t[19]||(t[19]=e("h2",{class:"text-lg font-medium"},"Konfirmasi Hapus",-1)),e("p",Se,'Yakin ingin menghapus videotron "'+p((l=h.value)==null?void 0:l.name)+'"?',1),e("div",$e,[a(L,{onClick:t[9]||(t[9]=M=>f.value=!1)},{default:n(()=>t[17]||(t[17]=[_("Batal")])),_:1}),a(Z,{onClick:F,class:"ml-3"},{default:n(()=>t[18]||(t[18]=[_("Ya, Hapus")])),_:1})])])]}),_:1},8,["show"])]}),_:1})],64))}};export{Oe as default};
