import{j as M,i as A,r as S,x as F,f,o as g,a,u as l,g as P,w as p,b as t,d as U,h as v,e as B,t as k,T as C,F as N,A as O}from"./app-BLeNn4LO.js";import{A as $}from"./AuthenticatedLayout-HllnW7fv.js";import{_ as u}from"./InputError-Bjz1dp-D.js";import{_ as n}from"./InputLabel-CgxTHTmz.js";import{_ as D}from"./PrimaryButton-6Sj3evt6.js";import{_ as m}from"./TextInput-DSC7ne63.js";import"./XMarkIcon-CnMNgzJZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},G={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},L={class:"p-6"},j={key:0},J={key:0,class:"mt-2 text-sm text-gray-500"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},H={class:"flex items-center gap-4"},I={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},se={__name:"Form",setup(K){var y,_,b,x,h;const V=M(),i=A(()=>V.props.music||null),d=S(!1),e=F({title:((y=i.value)==null?void 0:y.title)||"",singer:((_=i.value)==null?void 0:_.singer)||"",album:((b=i.value)==null?void 0:b.album)||"",year:((x=i.value)==null?void 0:x.year)||"",genre:((h=i.value)==null?void 0:h.genre)||"",audio_file:null,_method:i.value?"PUT":"POST"}),w=async c=>{const s=c.target.files[0];if(!s)return;e.audio_file=s,d.value=!0;const o=new FormData;o.append("audio_file",s);try{const r=await O.post(route("admin.music.analyze"),o,{headers:{"Content-Type":"multipart/form-data"}});e.title=r.data.title||"",e.singer=r.data.singer||"",e.album=r.data.album||"",e.year=r.data.year||"",e.genre=r.data.genre||""}catch(r){console.error("Gagal menganalisis file:",r),alert("Gagal membaca metadata dari file. Silakan isi manual.")}finally{d.value=!1}},T=()=>{const c=i.value?"admin.music.update":"admin.music.store",s=i.value?i.value.id:{};e.post(route(c,s),{preserveScroll:!0})};return(c,s)=>(g(),f(N,null,[a(l(P),{title:i.value?"Edit Musik":"Tambah Musik Baru"},null,8,["title"]),a($,null,{header:p(()=>[t("h2",E,k(i.value?"Edit Musik":"Tambah Musik Baru"),1)]),default:p(()=>[t("div",G,[t("div",q,[t("div",z,[t("div",L,[t("form",{onSubmit:U(T,["prevent"]),class:"space-y-6"},[i.value?v("",!0):(g(),f("div",j,[a(n,{for:"audio_file",value:"File Audio (MP3, WAV)"}),t("input",{id:"audio_file",type:"file",onChange:w,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),d.value?(g(),f("div",J,"Menganalisis file...")):v("",!0),a(u,{class:"mt-2",message:l(e).errors.audio_file},null,8,["message"])])),t("div",W,[t("div",null,[a(n,{for:"title",value:"Judul Lagu"}),a(m,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:l(e).title,"onUpdate:modelValue":s[0]||(s[0]=o=>l(e).title=o),required:"",autofocus:""},null,8,["modelValue"]),a(u,{class:"mt-2",message:l(e).errors.title},null,8,["message"])]),t("div",null,[a(n,{for:"singer",value:"Penyanyi"}),a(m,{id:"singer",type:"text",class:"mt-1 block w-full",modelValue:l(e).singer,"onUpdate:modelValue":s[1]||(s[1]=o=>l(e).singer=o),required:""},null,8,["modelValue"]),a(u,{class:"mt-2",message:l(e).errors.singer},null,8,["message"])]),t("div",null,[a(n,{for:"album",value:"Album (Opsional)"}),a(m,{id:"album",type:"text",class:"mt-1 block w-full",modelValue:l(e).album,"onUpdate:modelValue":s[2]||(s[2]=o=>l(e).album=o)},null,8,["modelValue"]),a(u,{class:"mt-2",message:l(e).errors.album},null,8,["message"])]),t("div",null,[a(n,{for:"year",value:"Tahun (Opsional)"}),a(m,{id:"year",type:"text",class:"mt-1 block w-full",modelValue:l(e).year,"onUpdate:modelValue":s[3]||(s[3]=o=>l(e).year=o)},null,8,["modelValue"]),a(u,{class:"mt-2",message:l(e).errors.year},null,8,["message"])])]),t("div",null,[a(n,{for:"genre",value:"Genre (Opsional)"}),a(m,{id:"genre",type:"text",class:"mt-1 block w-full",modelValue:l(e).genre,"onUpdate:modelValue":s[4]||(s[4]=o=>l(e).genre=o)},null,8,["modelValue"]),a(u,{class:"mt-2",message:l(e).errors.genre},null,8,["message"])]),t("div",H,[a(D,{disabled:l(e).processing||d.value},{default:p(()=>[B(k(i.value?"Simpan Perubahan":"Tambah Musik"),1)]),_:1},8,["disabled"]),a(C,{"enter-from-class":"opacity-0","leave-to-class":"opacity-0",class:"transition ease-in-out"},{default:p(()=>[l(e).recentlySuccessful?(g(),f("p",I,"Tersimpan.")):v("",!0)]),_:1})])],32)])])])])]),_:1})],64))}};export{se as default};
