import{A as L}from"./AuthenticatedLayout-CzYuN022.js";import{f as r,o as l,b as e,j as U,i as w,r as f,k as W,p as Y,a as n,u as g,g as F,w as d,h as p,F as B,l as I,t as u,e as c,n as K,c as E,W as S}from"./app-CPhxPLrA.js";import{_ as O}from"./Toast-BtswQNda.js";import{_ as N,D as q}from"./Modal-COFi4xGw.js";import{_ as H}from"./SecondaryButton-BTLkx_dz.js";import{_ as J}from"./PrimaryButton-DgYbJ7mL.js";import{P as R}from"./plyr-D_3sJyRt.js";import{r as G}from"./XCircleIcon-BA_dAnus.js";import{r as Q}from"./CheckCircleIcon-CMGAWdTY.js";import"./XMarkIcon-Cg4hbH_O.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function X(k,m){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z","clip-rule":"evenodd"})])}function ee(k,m){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),e("path",{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z","clip-rule":"evenodd"})])}const te={class:"pb-12 pt-4"},se={class:"max-w-full mx-auto"},ae={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},oe={class:"p-6 text-gray-900"},le={class:"border-t border-gray-200"},re={class:"divide-y divide-gray-200"},ne={key:0,class:"py-10 text-center"},ie={class:"flex items-center gap-4 w-full md:w-2/3"},de={class:"flex-shrink-0 relative group"},ue=["onClick"],ce=["src"],pe={key:1,class:"h-20 w-32 rounded-lg bg-gray-800 flex items-center justify-center text-white font-bold text-2xl"},me={class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity rounded-lg"},ve={class:"flex-grow"},_e=["title"],fe={class:"mt-1 text-sm text-gray-500"},ge={class:"flex-shrink-0 mt-4 md:mt-0 md:ml-4 space-x-2"},ye=["onClick"],he=["onClick"],xe={class:"p-6"},we={class:"mt-2 text-sm text-gray-600"},be={class:"mt-6 flex justify-end space-x-3"},ke={class:"p-4 bg-gray-900"},Ce={class:"text-lg font-semibold text-white mb-4"},Me={class:"aspect-video bg-black rounded-lg relative main-grid-preview"},je=["src"],Pe=["src"],Ae={class:"player-container"},$e=["data-poster"],Te=["data-plyr-embed-id"],Be={key:2,class:"absolute bottom-10 left-0 w-full overflow-hidden z-20 bg-black bg-opacity-50"},Ee={class:"marquee-content-preview text-white text-lg"},Ie={__name:"Approvals",setup(k){const m=U(),C=w(()=>m.props.pendingMedia||{data:[]}),V=w(()=>{var a;return(a=m.props.flash)==null?void 0:a.message}),Z=w(()=>{var a;return((a=m.props.flash)==null?void 0:a.type)||"info"}),b=f(!1),y=f(!1),s=f(null),v=f("approve"),h=f(null);let i=null;const z=w(()=>{const a=s.value;if(a&&a.source_type==="youtube")try{return new URL(a.source_value).searchParams.get("v")}catch{return null}return null}),M=(a,t)=>{s.value=a,v.value=t,b.value=!0},D=a=>{s.value=a,y.value=!0},x=()=>{b.value=!1,y.value=!1,i&&(i.destroy(),i=null),s.value=null},j=()=>{if(!s.value)return;const a={preserveScroll:!0,onSuccess:()=>x()};v.value==="approve"?S.patch(route("admin.media.approve",s.value.id),{},a):S.delete(route("admin.media.reject",s.value.id),a)};return W(y,async a=>{a&&s.value?(await Y(),h.value&&(i=new R(h.value,{controls:["play-large","play","progress","current-time","mute","volume","fullscreen"],autoplay:!0}))):i&&(i.destroy(),i=null)}),(a,t)=>(l(),r(B,null,[n(g(F),{title:"Persetujuan Media"}),n(L,null,{header:d(()=>t[0]||(t[0]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Persetujuan Media",-1)])),default:d(()=>[n(O,{message:V.value,type:Z.value},null,8,["message","type"]),e("div",te,[e("div",se,[e("div",ae,[e("div",oe,[t[5]||(t[5]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"}," Daftar Media Menunggu Persetujuan ",-1)),e("div",le,[e("dl",re,[C.value.data.length?p("",!0):(l(),r("div",ne,[n(g(X),{class:"mx-auto h-12 w-12 text-gray-400"}),t[1]||(t[1]=e("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"Tidak Ada Media",-1)),t[2]||(t[2]=e("p",{class:"mt-1 text-sm text-gray-500"},"Saat ini tidak ada media yang menunggu persetujuan.",-1))])),(l(!0),r(B,null,I(C.value.data,o=>(l(),r("div",{key:o.id,class:"flex flex-col md:flex-row items-center justify-between p-4 sm:p-6"},[e("div",ie,[e("div",de,[e("button",{onClick:_=>D(o),class:"block"},[o.source_type==="local"?(l(),r("img",{key:0,src:o.preview_url,class:"h-20 w-32 rounded-lg object-cover bg-gray-200",alt:"preview"},null,8,ce)):(l(),r("div",pe,u(o.source_type.charAt(0).toUpperCase()),1)),e("div",me,[n(g(ee),{class:"h-8 w-8 text-white"})])],8,ue)]),e("div",ve,[e("dt",{class:"text-sm font-medium text-gray-900 truncate",title:o.title},u(o.title),9,_e),e("dd",fe,"Oleh: "+u(o.client.company_name),1)])]),e("div",ge,[e("button",{onClick:_=>M(o,"reject"),type:"button",class:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},[n(g(G),{class:"h-5 w-5 mr-1.5 text-red-500"}),t[3]||(t[3]=c(" Tolak "))],8,ye),e("button",{onClick:_=>M(o,"approve"),type:"button",class:"inline-flex items-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"},[n(g(Q),{class:"h-5 w-5 mr-1.5"}),t[4]||(t[4]=c(" Setujui "))],8,he)])]))),128))])])])])])]),n(N,{show:b.value,onClose:x,maxWidth:"md"},{default:d(()=>{var o;return[e("div",xe,[t[10]||(t[10]=e("h2",{class:"text-lg font-medium text-gray-900"}," Konfirmasi Aksi ",-1)),e("p",we,[t[6]||(t[6]=c(" Apakah Anda yakin ingin ")),e("span",{class:K(v.value==="approve"?"font-bold text-green-600":"font-bold text-red-600")},u(v.value==="approve"?"MENYETUJUI":"MENOLAK"),3),c(' media "'+u((o=s.value)==null?void 0:o.title)+'"? ',1)]),e("div",be,[n(H,{onClick:x},{default:d(()=>t[7]||(t[7]=[c("Batal")])),_:1}),v.value==="approve"?(l(),E(J,{key:0,onClick:j},{default:d(()=>t[8]||(t[8]=[c("Ya, Setujui")])),_:1})):(l(),E(q,{key:1,onClick:j},{default:d(()=>t[9]||(t[9]=[c("Ya, Tolak & Hapus")])),_:1}))])])]}),_:1},8,["show"]),n(N,{show:y.value,onClose:x,maxWidth:"2xl"},{default:d(()=>{var o,_,P,A,$,T;return[e("div",ke,[e("h3",Ce,u((o=s.value)==null?void 0:o.title),1),e("div",Me,[(_=s.value)!=null&&_.top_banner_url?(l(),r("img",{key:0,src:s.value.top_banner_url,class:"absolute top-0 left-0 w-full z-10"},null,8,je)):p("",!0),(P=s.value)!=null&&P.bottom_banner_url?(l(),r("img",{key:1,src:s.value.bottom_banner_url,class:"absolute bottom-0 left-0 w-full z-10"},null,8,Pe)):p("",!0),e("div",Ae,[((A=s.value)==null?void 0:A.source_type)==="local"?(l(),r("div",{key:0,ref_key:"previewPlayerEl",ref:h,"data-poster":s.value.preview_url},null,8,$e)):p("",!0),(($=s.value)==null?void 0:$.source_type)==="youtube"?(l(),r("div",{key:1,ref_key:"previewPlayerEl",ref:h,class:"plyr__video-embed","data-plyr-provider":"youtube","data-plyr-embed-id":z.value},null,8,Te)):p("",!0)]),(T=s.value)!=null&&T.running_text?(l(),r("div",Be,[e("p",Ee,u(s.value.running_text),1)])):p("",!0)])])]}),_:1},8,["show"])]),_:1})],64))}};export{Ie as default};
